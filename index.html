<!DOCTYPE html>
<html lang="de">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="./src/output.css?v=33" rel="stylesheet">

    <title>To-Do-App</title>
</head>

<body class="min-h-screen w-full bg-black ">
    <div class="flex flex-col justify-center items-center h-screen w-full">
        <h1 class="text-6xl text-orange-400 hover:font-bold hover:border-1 rounded-2xl p-4 cursor-pointer">To-Do-App!
        </h1>

        <div class="listContainer hidden flex-col px-4 pt-8">
            <form action="" class="insertToDo">
                <label for="" class="text-white hyphens-none text-2xl flex items-center gap-4 ">Erstelle dein To-Do:
                    <input type="text" name="inputField" placeholder="To-Do erstellen"
                        class="border-1 border-white p-2 rounded-2xl">
                    <input type="submit" value="erstellen" id="submitInput" name="submitInput"
                        class="border-1 border-white p-2 rounded-2xl">
                </label>
            </form>
            <!-- `<button class="deleteBtn bg-red-500 hover:bg-green-500 p-2">X</button>` -->

            <h2 class="hidden pt-10 text-orange-400">Hier deine Liste:</h2>
            <ul class="list flex gap-y-4 flex-col"></ul>
        </div>
    </div>


    <script>
        const h1 = document.querySelector('h1');
        const listContainer = document.querySelector('.listContainer');
        const submitInput = document.querySelector('#submitInput');
        const list = document.querySelector('.list');


        // Öffnet die App
        function openList() {
            const parent = h1.parentElement;
            parent.className = "justify-start items-start text-3xl";
            // Hover komplett deaktivieren
            h1.style.pointerEvents = 'none';
            listContainer.classList.remove('hidden');
        }

        function addToList() {
            let newInput = document.querySelector('input').value;
            if (newInput.trim() === '') {
                // wenn kein Tesxt eingegeben, dann ErrorMessage
                const errorMsg = document.createElement('em');
                errorMsg.className = 'text-white text-sm';
                errorMsg.innerText = "Kein Inhalt angegeben. Bitte im Feld ein To-Do erstellen.";
                // errorMsg vor der Liste einfügen
                list.parentNode.insertBefore(errorMsg, list);

                return; // Funktion beenden
            } 
            // prüfen, ob errorMsg immer noch existiert, wenn ja: löschen 
            const erroringExist = document.querySelector('em');
            if (erroringExist) {
                erroringExist.remove();
            }
            // To-Do wird erstellt
            const newListelememt = document.createElement('li');
            newListelememt.className = "relative flex items-center gap-4 text-white list-disc text-xs m-4";
            newListelememt.innerHTML = `<span class="flex items-center w-4 h-4 bg-orange-400 rounded-full ml-3"></span>
                                        <span class="flex-1 top-0 left-0 flex justify-start gap-4 w-fit">${newInput}</span> 
                                        <button class="deleteBtn border-1 rounded-2xl p-2 font-bold hover:cursor-pointer hover:bg-white hover:text-orange-400 transition-all duration-500" title="Dieses To-do löschen.">X</button>`;

            list.appendChild(newListelememt);
            document.querySelector('input').value = '';
        }

        document.addEventListener('click', (event) => {
            if (event.target === h1) {
                openList();
            }
            if (event.target === submitInput) {
                event.preventDefault();
                document.querySelector('h2').classList.remove('hidden');

                addToList();
            }
            if (event.target.classList.contains('deleteBtn')) {
                event.target.closest('li').remove();
            }

        })

    </script>
</body>

</html>